(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5175],{9821:function(e,t,s){Promise.resolve().then(s.bind(s,8024))},8024:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var r=s(7437),a=s(3159),l=s(9150),i=s(4033),o=s(1208),c=s(3750),n=s(2993),d=s(2265),x=s(2046),m=s(3089),u=s(1197),h=s(3777),S=s(9605);let f=[h.h,S.X],p=[{key:"PISO_1",title:"Piso 1"},{key:"PISO_2",title:"Piso 2"}];var v=s(2406),j=s(4504),b=()=>{var e;let t=(0,n.T)(),s=(0,n.C)(e=>e.selectTrip.value),[h,S]=(0,d.useState)("PISO_1"),[b,g]=(0,d.useState)([]);(0,n.C)(e=>e.seatsReserved.totalSeats);let C=(0,n.C)(e=>e.seatsReserved.seats),{data:N,error:k}=(0,o.O)(s),y=null!==(e=null==N?void 0:N.itinerary.seats)&&void 0!==e?e:{},[F,w]=(0,d.useState)({addSeatsFirstFloorIsPressed:!0,addSeatsSecondFloorIsPressed:!0,firstFloorSeatsSelected:[],secondFloorSeatsSelected:[]}),{data:_,error:I}=(0,c.Y)(null==N?void 0:N.itinerary.default_bus),M=(0,i.useRouter)(),V=async()=>{M.push("/ticket-sales/itinerary")},P=async()=>{M.push("/ticket-sales/datacustomer")},O=async()=>{M.push("/ticket-sales/")},H=new Date(null==N?void 0:N.itinerary.valid_since),A=H.getUTCDate(),D=H.getUTCMonth(),E=H.getUTCFullYear(),L=H.getUTCHours(),T=H.getUTCMinutes(),B=H.getUTCSeconds(),Z=(0,n.C)(e=>e.ItinerarySelected.cityDestination),U=(0,n.C)(e=>e.ItinerarySelected.cityOrigin),q=["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"][H.getDay()],W=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][D],R="".concat(E,"-").concat(D<10?"0":"").concat(D,"-").concat(A<10?"0":"").concat(A),X="".concat(L<10?"0":"").concat(L,":").concat(T<10?"0":"").concat(T,":").concat(B<10?"0":"").concat(B);"".concat(R," ").concat(X);let J=e=>{S(e)},z=F.addSeatsFirstFloorIsPressed||F.addSeatsSecondFloorIsPressed,Y=F.firstFloorSeatsSelected,Q=F.secondFloorSeatsSelected;console.log(Y),console.log(Q),console.log(C);let G=e=>{let s={seatId:e},r=F["PISO_1"===h?"firstFloorSeatsSelected":"secondFloorSeatsSelected"].some(e=>e.seatId===s.seatId);console.log("handleRemoveSeatFromStatehandleRemoveSeatFromState"),console.log(r),console.log(e),r&&(w({...F,..."PISO_1"===h?{firstFloorSeatsSelected:[...F.firstFloorSeatsSelected.filter(t=>t.seatId!==e)]}:{secondFloorSeatsSelected:[...F.secondFloorSeatsSelected.filter(t=>t.seatId!==e),,]}}),t((0,m.ts)(F.firstFloorSeatsSelected.length+F.secondFloorSeatsSelected.length-1)),t((0,m.tX)(F.firstFloorSeatsSelected.concat(F.secondFloorSeatsSelected))))},K=(e,s,r,a,l)=>{if(console.log("handleAddSeathandleAddSeat"),console.log(F.firstFloorSeatsSelected),console.log(e),!z)return;let i={seatId:e},o=F["PISO_1"===h?"firstFloorSeatsSelected":"secondFloorSeatsSelected"].some(e=>e.seatId===i.seatId);console.log(o),o||(w({...F,..."PISO_1"===h?{firstFloorSeatsSelected:[...F.firstFloorSeatsSelected,{seatId:e,price:s,numberSeat:r,typeSeat:a,ticket:l}]}:{secondFloorSeatsSelected:[...F.secondFloorSeatsSelected,{seatId:e,price:s,numberSeat:r,typeSeat:a,ticket:l}]}}),t((0,m.ts)(F.firstFloorSeatsSelected.length+F.secondFloorSeatsSelected.length+1)),t((0,m.tX)(F.firstFloorSeatsSelected.concat(F.secondFloorSeatsSelected))))};return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"bg-white p-4",children:[(0,r.jsxs)("div",{className:"flex flex-row justify-between items-center p-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-primary",children:"Itinerario"}),(0,r.jsxs)("button",{onClick:O,className:"btn btn-outline py-0 ",children:[(0,r.jsx)(a.aHS,{className:"mr-2 "}),(0,r.jsx)("span",{children:" Cancelar"})]})]}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsxs)("div",{className:"",children:[(0,r.jsxs)("div",{className:"flex items-center mr-8 mb-4",children:[(0,r.jsx)("div",{className:"p-1 mr-4 rounded-full bg-bgblack text-md",children:(0,r.jsx)(l.y1n,{className:"text-white"})}),(0,r.jsx)("div",{className:"",children:(0,r.jsx)("div",{className:"text-md font-medium",children:"IDA"})})]}),(0,r.jsx)("div",{className:"text-medium text-xs",children:"Fecha de salida:"}),(0,r.jsx)("div",{className:"text-primary text-xs uppercase",children:"".concat(q," ").concat(A," ").concat(W," ").concat(E)})]}),(0,r.jsx)("div",{className:"mx-8 grow flex items-center",children:(0,r.jsxs)("div",{className:"collapse bg-white border border-primary",children:[(0,r.jsx)("input",{type:"checkbox"}),(0,r.jsxs)("div",{className:"collapse-title text-sm font-medium",children:[null==N?void 0:N.itinerary.arrival_time," General MIN S/ 80.0"]}),(0,r.jsx)("div",{className:"collapse-content",children:(0,r.jsx)("div",{className:"mt-8 overflow-auto",children:(0,r.jsx)(u.Z,{})})})]})}),(0,r.jsx)("div",{className:" flex items-center w-48",children:(0,r.jsxs)("div",{className:"",children:[(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-bold",children:"Embarque: "})," ",Z]}),(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-bold",children:"Desembarque: "})," ",U]})]})})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 mt-8 space-x-4",children:[(0,r.jsxs)("div",{className:"flex flex-1 flex-col p-4",children:[(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"tabs tabs-boxed rounded-[14px]",children:p.map((e,t)=>{let{key:s,title:a}=e;return(0,r.jsx)("button",{className:(0,x.cn)("tab grow px-8",h===s&&"tab-active"),onClick:()=>J(s),children:a},"bus-floors-tabs-".concat(s,"-").concat(t))})})})}),(0,r.jsxs)("div",{className:"mt-6 rounded-[25px] border border-borderPaneAlt p-7 flex flex-col gap-6",children:[(0,r.jsx)("div",{className:"flex flex-row justify-center items-center gap-6",children:f.map((e,t)=>(0,r.jsx)("div",{className:"rounded-[15px] border border-bgBorderBusFloor py-2 px-10 flex flex-1 items-center justify-center",children:(0,r.jsx)(e,{})},"bus-floor-icon-".concat(t)))}),(0,r.jsx)("div",{className:"flex flex-row gap-6",children:(null==N?void 0:N.itinerary.seats)!=void 0?(e=>{let t=[e.seatsFirstFloor1Line,e.seatsFirstFloor2Line],s=[e.seatsFirstFloor3Line,e.seatsFirstFloor4Line];return(0,r.jsxs)(d.Fragment,{children:[(0,r.jsx)("div",{className:"flex flex-grow items-center flex-col gap-4",children:(0,r.jsx)("div",{className:"flex flex-row gap-4",children:t.map((e,t)=>{let s=1+t;return(0,r.jsx)("div",{className:"flex flex-col gap-4","data-col":"C".concat(s),children:e.map((e,t)=>{let s="".concat(h,"_").concat(e.id_seat),a={seatId:e.id_seat},l=F["PISO_1"===h?"firstFloorSeatsSelected":"secondFloorSeatsSelected"].some(e=>e.seatId===a.seatId);return(0,r.jsxs)("button",{className:(0,x.cn)("relative transition-all btn__seat__pickup",z&&"opacity-50 hover:opacity-100 cursor-pointer"),id:s,onClick:()=>{""==e.ticket&&K(e.id_seat,e.price,e.seat_number,e.seat_type,e.ticket)},children:[(0,r.jsx)(v.i,{seatBgColor:l?"#D6E6FF":""==e.ticket?void 0:"#45454a",seatBorderColor:l?"#4185EF":""==e.ticket?void 0:"#000000"}),(0,r.jsx)("span",{className:(0,x.cn)("absolute block inset-0 top-1/4 font-medium",l?"text-textStepsChecked":"text-textMuted"),children:e.seat_number})]},t)})},t)})})}),(0,r.jsx)("div",{className:"flex flex-grow items-center flex-col gap-4",children:(0,r.jsx)("div",{className:"flex flex-row gap-4",children:s.map((e,t)=>{let s=3+t;return(0,r.jsx)("div",{className:"flex flex-col gap-4","data-col":"C".concat(s),children:e.map((e,t)=>{let s="".concat(h,"_").concat(e.id_seat),a={seatId:e.id_seat},l=F["PISO_1"===h?"firstFloorSeatsSelected":"secondFloorSeatsSelected"].some(e=>e.seatId===a.seatId);return(0,r.jsxs)("button",{className:(0,x.cn)("relative transition-all btn__seat__pickup ",z&&"opacity-50 hover:opacity-100 cursor-pointer "),id:s,onClick:()=>{""==e.ticket&&K(e.id_seat,e.price,e.seat_number,e.seat_type,e.ticket)},children:[(0,r.jsx)(v.i,{seatBgColor:l?"#D6E6FF":""==e.ticket?void 0:"#45454a",seatBorderColor:l?"#4185EF":""==e.ticket?void 0:"#000000"}),(0,r.jsx)("span",{className:(0,x.cn)("absolute block inset-0 top-1/4 font-medium",l?"text-textStepsChecked":"text-textMuted"),children:e.seat_number})]},t)})},t)})})})]})})("PISO_1"===h?y.firstFloor:y.secondFloor):""})]})]}),(0,r.jsxs)("div",{className:"justify-center bg-fixed",children:[(0,r.jsxs)("div",{className:"grid grid-cols-3 justify-center",children:[(0,r.jsxs)("div",{className:"flex ",children:[(0,r.jsx)("div",{className:"w-5 h-5 border bg-bginput rounded-md mr-4"})," ","Libres"]}),(0,r.jsxs)("div",{className:"flex ",children:[(0,r.jsx)("div",{className:"w-5 h-5 border border-black  bg-bgChipMuted rounded-md mr-4"})," ","Ocupados"]}),(0,r.jsxs)("div",{className:"flex ",children:[(0,r.jsx)("div",{className:"w-5 h-5 border bg-thcolor border-secondary rounded-md mr-4"})," ","Seleccionados"]})]}),(0,r.jsxs)("div",{className:"bg-white w-full p-4 shadow rounded-xl mt-8",children:[(0,r.jsx)("div",{className:"font-medium my-4",children:"ASIENTOS SELECCIONADOS"}),(0,r.jsxs)("div",{className:"grid grid-cols-2",children:[F.secondFloorSeatsSelected.map((e,t)=>(0,r.jsxs)("div",{onMouseEnter:()=>{},onMouseLeave:()=>{},className:"flex items-center  text-textStepsChecked gap-2 transition-colors hover:border-textSeatChipStrong hover:text-textSeatChipStrong cursor-pointer",children:[(0,r.jsxs)("div",{className:"flex items-center mt-4 pr-5",children:[(0,r.jsx)("div",{className:"flex justify-center items-center rounded-xl border border-primary bg-thcolor w-12 h-12 text-primary font-medium",children:e.numberSeat}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsxs)("div",{className:"",children:["Servicio","special_needs"==e.typeSeat?" Asientos especial":"VIP"==e.typeSeat?" VIP":" Normal"]}),(0,r.jsxs)("div",{className:"font-medium",children:["S/.",e.price]})]})]}),(0,r.jsx)("button",{onClick:()=>G(e.seatId),children:(0,r.jsx)(j.F,{})})]},"".concat(h,"-").concat(e))),F.firstFloorSeatsSelected.map((e,t)=>(0,r.jsxs)("div",{onMouseEnter:()=>{},onMouseLeave:()=>{},className:"flex items-center  text-textStepsChecked gap-2 transition-colors hover:border-textSeatChipStrong hover:text-textSeatChipStrong cursor-pointer",children:[(0,r.jsxs)("div",{className:"flex items-center mt-4 pr-5",children:[(0,r.jsx)("div",{className:"flex justify-center items-center rounded-xl border border-primary bg-thcolor w-12 h-12 text-primary font-medium",children:e.numberSeat}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsxs)("div",{className:"",children:["Servicio","special_needs"==e.typeSeat?" Asientos especial":"VIP"==e.typeSeat?" VIP":" Normal"]}),(0,r.jsxs)("div",{className:"font-medium",children:["S/.",e.price]})]})]}),(0,r.jsx)("button",{onClick:()=>G(e.seatId),children:(0,r.jsx)(j.F,{})})]},"".concat(h,"-").concat(e)))]}),(0,r.jsxs)("div",{className:"grid grid-cols-2  ",children:[(0,r.jsx)("div",{}),(0,r.jsxs)("div",{className:"flex flex-col items-end",children:[(0,r.jsx)("div",{className:"",children:"VIAJE DIA"}),(0,r.jsxs)("div",{children:["Subtotal: S/ ",F.firstFloorSeatsSelected.reduce((e,t)=>e+parseFloat(t.price),0)]}),(0,r.jsx)("div",{className:"border-t w-full border-black my-2"}),(0,r.jsxs)("div",{className:"text-xl font-bold",children:["TOTAL: S/ ",F.firstFloorSeatsSelected.reduce((e,t)=>e+parseFloat(t.price),0)]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 mt-8 ",children:[(0,r.jsx)("button",{onClick:V,className:"m-2 btn btn-outline hover:bg-primary hover:border-white text-primary normal-case font-medium rounded-xl",children:"Atr\xe1s"}),(0,r.jsx)("button",{onClick:P,className:" m-2 btn btn-info bg-primary hover:bg-secondary text-white rounded-xl border-white normal-case font-medium",children:"Continuar"})]})]})]})]})]})}},4504:function(e,t,s){"use strict";s.d(t,{F:function(){return a}});var r=s(7437);let a=e=>(0,r.jsxs)("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,r.jsx)("path",{d:"M2 2L11 11",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"square"}),(0,r.jsx)("path",{d:"M11 2L2 11",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"square"})]})},2406:function(e,t,s){"use strict";s.d(t,{i:function(){return a}});var r=s(7437);let a=e=>{let{seatBgColor:t="#EBEBED",seatBorderColor:s="#CACACC",...a}=e;return(0,r.jsxs)("svg",{width:"70",height:"70",viewBox:"0 0 46 43",fill:"none",xmlns:"http://www.w3.org/2000/svg",...a,children:[(0,r.jsx)("path",{d:"M34.5526 0.42334H11.6377C7.74365 0.42334 4.58691 3.56071 4.58691 7.43086V30.6433C4.58691 34.5134 7.74365 37.6508 11.6377 37.6508H34.5526C38.4467 37.6508 41.6034 34.5134 41.6034 30.6433V7.43086C41.6034 3.56071 38.4467 0.42334 34.5526 0.42334Z",fill:t,stroke:s,strokeWidth:"0.5",strokeMiterlimit:"10"}),(0,r.jsx)("path",{d:"M45.1819 10.9609C45.1819 8.9968 43.5799 7.40459 41.6036 7.40459C39.6274 7.40459 38.0254 8.9968 38.0254 10.9609V34.5324C38.0254 36.4965 39.6274 38.0888 41.6036 38.0888C43.5799 38.0888 45.1819 36.4965 45.1819 34.5324V10.9609Z",fill:t,stroke:s,strokeWidth:"0.5",strokeMiterlimit:"10"}),(0,r.jsx)("path",{d:"M8.15652 10.9609C8.15652 8.9968 6.55448 7.40459 4.57826 7.40459C2.60204 7.40459 1 8.9968 1 10.9609V34.5324C1 36.4965 2.60204 38.0888 4.57826 38.0888C6.55448 38.0888 8.15652 36.4965 8.15652 34.5324V10.9609Z",fill:t,stroke:s,strokeWidth:"0.5",strokeMiterlimit:"10"}),(0,r.jsx)("path",{d:"M39.1446 30.2403H7.046C3.71174 30.2403 1.00879 32.9267 1.00879 36.2405C1.00879 39.5543 3.71174 42.2407 7.046 42.2407H39.1446C42.4789 42.2407 45.1818 39.5543 45.1818 36.2405C45.1818 32.9267 42.4789 30.2403 39.1446 30.2403Z",fill:t,stroke:s,strokeWidth:"0.5",strokeMiterlimit:"10"})]})}},3777:function(e,t,s){"use strict";s.d(t,{h:function(){return a}});var r=s(7437);let a=e=>(0,r.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,r.jsx)("mask",{id:"mask0_693_2078",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:(0,r.jsx)("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),(0,r.jsx)("g",{mask:"url(#mask0_693_2078)",children:(0,r.jsx)("path",{d:"M5.5 22V14.5H4V9C4 8.45 4.19583 7.97917 4.5875 7.5875C4.97917 7.19583 5.45 7 6 7H9C9.55 7 10.0208 7.19583 10.4125 7.5875C10.8042 7.97917 11 8.45 11 9V14.5H9.5V22H5.5ZM7.5 6C6.95 6 6.47917 5.80417 6.0875 5.4125C5.69583 5.02083 5.5 4.55 5.5 4C5.5 3.45 5.69583 2.97917 6.0875 2.5875C6.47917 2.19583 6.95 2 7.5 2C8.05 2 8.52083 2.19583 8.9125 2.5875C9.30417 2.97917 9.5 3.45 9.5 4C9.5 4.55 9.30417 5.02083 8.9125 5.4125C8.52083 5.80417 8.05 6 7.5 6ZM15 22V16H12L14.55 8.35C14.6833 7.91667 14.9292 7.58333 15.2875 7.35C15.6458 7.11667 16.05 7 16.5 7C16.95 7 17.3542 7.11667 17.7125 7.35C18.0708 7.58333 18.3167 7.91667 18.45 8.35L21 16H18V22H15ZM16.5 6C15.95 6 15.4792 5.80417 15.0875 5.4125C14.6958 5.02083 14.5 4.55 14.5 4C14.5 3.45 14.6958 2.97917 15.0875 2.5875C15.4792 2.19583 15.95 2 16.5 2C17.05 2 17.5208 2.19583 17.9125 2.5875C18.3042 2.97917 18.5 3.45 18.5 4C18.5 4.55 18.3042 5.02083 17.9125 5.4125C17.5208 5.80417 17.05 6 16.5 6Z",fill:"#343438"})})]})},9605:function(e,t,s){"use strict";s.d(t,{X:function(){return a}});var r=s(7437);let a=e=>(0,r.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,r.jsx)("mask",{id:"mask0_693_2081",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:(0,r.jsx)("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),(0,r.jsx)("g",{mask:"url(#mask0_693_2081)",children:(0,r.jsx)("path",{d:"M6 18H10.425V14.675H13V11.35H15.575V8H18V6H13.575V9.325H11V12.65H8.425V16H6V18ZM5 21C4.45 21 3.97917 20.8042 3.5875 20.4125C3.19583 20.0208 3 19.55 3 19V5C3 4.45 3.19583 3.97917 3.5875 3.5875C3.97917 3.19583 4.45 3 5 3H19C19.55 3 20.0208 3.19583 20.4125 3.5875C20.8042 3.97917 21 4.45 21 5V19C21 19.55 20.8042 20.0208 20.4125 20.4125C20.0208 20.8042 19.55 21 19 21H5Z",fill:"#343438"})})]})},5215:function(e,t,s){"use strict";s.d(t,{OT:function(){return a},T5:function(){return r},lC:function(){return l}});let r="http://3.14.43.44:4567",a=1,l="production"},3089:function(e,t,s){"use strict";s.d(t,{tX:function(){return i},ts:function(){return l}});var r=s(4302);let a=(0,r.createSlice)({name:"seatsReserved",initialState:{totalSeats:0,seats:[]},reducers:{changeTotalSeats:(e,t)=>{let s=t.payload;e.totalSeats=s},changeSeats:(e,t)=>{let s=t.payload;e.seats=s}}}),{changeTotalSeats:l,changeSeats:i}=a.actions;t.ZP=a.reducer},1208:function(e,t,s){"use strict";s.d(t,{O:function(){return n},m:function(){return c}});var r=s(8324),a=s(2967),l=s(5215),i=s(1490);let o=i.Z.get("token"),c=(0,r.LC)({reducerPath:"itinerariesApi",baseQuery:(0,a.ni)({baseUrl:l.T5,headers:{Authorization:"Bearer ".concat(o)}}),endpoints:e=>({getItinerary:e.query({query:e=>({url:"/itineraries/detail/".concat(e,"}/''")})})})}),{useGetItineraryQuery:n}=c},3750:function(e,t,s){"use strict";s.d(t,{Y:function(){return n},v:function(){return c}});var r=s(8324),a=s(2967),l=s(5215),i=s(1490);let o=i.Z.get("token"),c=(0,r.LC)({reducerPath:"seatsApi",baseQuery:(0,a.ni)({baseUrl:l.T5,headers:{Authorization:"Bearer ".concat(o)}}),endpoints:e=>({getSeats:e.query({query:e=>({url:"/bus/seats/1"})})})}),{useGetSeatsQuery:n}=c},2046:function(e,t,s){"use strict";s.d(t,{cn:function(){return l}});var r=s(7042),a=s(3986);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m)((0,r.W)(t))}}},function(e){e.O(0,[2420,3712,1677,8085,1023,4302,3069,689,2971,596,1744],function(){return e(e.s=9821)}),_N_E=e.O()}]);