(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8317],{4425:function(e,t,i){Promise.resolve().then(i.bind(i,7035))},7035:function(e,t,i){"use strict";i.r(t);var a=i(7437),n=i(2265),s=i(1396),r=i.n(s),l=i(4033),d=i(2046),c=i(2510),o=i(6004),m=i(6820),x=i.n(m);let u=[{id:1,originCity:"",originCityId:0,destinationCity:"",destinationCityId:0,travelTime:0,waitTime:0,distance:0}],p={name_route:""},h=e=>{for(let t of e)if(""===t.originCity||""===t.destinationCity||0===t.originCityId||0===t.destinationCityId||0===t.travelTime||0===t.waitTime||0===t.distance)return!1;return!0};t.default=()=>{var e,t,i;let[s,m]=(0,n.useState)(u),f=(0,n.useId)(),g=(0,l.useRouter)(),[v,b]=(0,n.useState)(p),[{loading:j,data:N}]=(0,o.b)("/cities/list"),[{loading:y},w]=(0,o.b)({method:"POST",url:"/routes"},{manual:!0}),C=j||y,_=s.length<1||!h(s),k=null!==(i=null==N?void 0:N.data.cities)&&void 0!==i?i:[],S=!!s[0].originCity&&(null===(e=k.find(e=>e.id_city===Number(s[0].originCity)))||void 0===e?void 0:e.city_name)||"No disponible",T=!!s[s.length-1].destinationCity&&(null===(t=k.find(e=>e.id_city===Number(s[s.length-1].destinationCity)))||void 0===t?void 0:t.city_name)||"No disponible",M=s.reduce((e,t)=>e+t.distance,0),O=s.reduce((e,t)=>e+t.travelTime,0),I=s.reduce((e,t)=>e+t.waitTime,0),E=O+I,D=e=>{if(s.length<=1)return;let t=s.filter(t=>t.id!==e);m(t)},P=(e,t)=>{let i=k.find(e=>e.id_city===Number(t));if(!i)return;let a=s.map(a=>a.id===e?{...a,originCity:String(i.id_city),originCityId:Number(t)}:a);m(a)},q=(e,t)=>{let i=k.find(e=>e.id_city===Number(t));if(!i)return;let a=s.map(a=>a.id===e?{...a,destinationCity:String(i.id_city),destinationCityId:Number(t)}:a);m(a)},z=(e,t)=>{let i=s.map(i=>i.id===e?{...i,travelTime:t}:i);m(i)},A=(e,t)=>{let i=s.map(i=>i.id===e?{...i,waitTime:t}:i);m(i)},H=(e,t)=>{let i=s.map(i=>i.id===e?{...i,distance:t}:i);m(i)},R=async()=>{try{let e=Number(s[0].originCity||0),t=Number(s[0].destinationCity||0);await w({data:{id_office_origin:e,id_office_destination:t,name_route:v.name_route,distance:M,estimated_duration:E,travel_time:O,wait_time:I,stops:s.map(e=>{let{distance:t,travelTime:i,waitTime:a,destinationCityId:n,originCityId:s}=e;return{id_origin:s,id_destination:n,wait_time:a,distance:t,travel_time:i,has_arrival:1,has_departure:1}})}}),x().fire("Ruta creada correctamente","","success").then(()=>{g.push("/route")})}catch(e){console.log(e)}};return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("div",{className:"flex flex-row justify-between",children:(0,a.jsx)("div",{className:"",children:(0,a.jsx)("h2",{className:"text-xl font-bold text-primary",children:"Nueva ruta"})})}),(0,a.jsxs)("div",{className:"flex flex-col my-8 gap-8",children:[(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("label",{htmlFor:"".concat(f,"-route-name"),className:"block mb-1 text-textMuted font-medium text-sm",children:"Nombre"}),(0,a.jsx)("input",{type:"text",id:"".concat(f,"-route-name"),value:v.name_route,onChange:e=>{let{target:{value:t}}=e;b({...v,name_route:t})},className:"input w-full max-w-xs py-3 px-5 rounded-xl input-bordered bg-bgCommonInput text-sm text-black",placeholder:"Ingresa nombre de la ruta",required:!0})]}),(0,a.jsxs)("div",{className:"flex gap-4 flex-grow flex-wrap",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 grow",children:[(0,a.jsx)("h4",{className:"text-textMuted font-medium text-sm truncate",children:"Origen"}),(0,a.jsx)("p",{className:"text-textStepsChecked font-medium text-sm",children:S})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 grow",children:[(0,a.jsx)("h4",{className:"text-textMuted font-medium text-sm truncate",children:"Destino"}),(0,a.jsx)("p",{className:"text-textStepsChecked font-medium text-sm",children:T})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 grow",children:[(0,a.jsx)("h4",{className:"text-textMuted font-medium text-sm truncate",children:"Duraci\xf3n estimada"}),(0,a.jsxs)("p",{className:"text-textStepsChecked font-medium text-sm",children:[E||"0"," min."]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 grow",children:[(0,a.jsx)("h4",{className:"text-textMuted font-medium text-sm truncate",children:"Distancia"}),(0,a.jsxs)("p",{className:"text-textStepsChecked font-medium text-sm",children:[M," KM"]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 grow",children:[(0,a.jsx)("h4",{className:"text-textMuted font-medium text-sm truncate",children:"Tiempo de viaje"}),(0,a.jsxs)("p",{className:"text-textStepsChecked font-medium text-sm",children:[O||"0"," min."]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 grow",children:[(0,a.jsx)("h4",{className:"text-textMuted font-medium text-sm truncate",children:"Tiempo de espera"}),(0,a.jsxs)("p",{className:"text-textStepsChecked font-medium text-sm",children:[I||"0"," min."]})]})]}),(0,a.jsxs)("div",{className:"border-borderLayout border-[0.5px] rounded-[15px] p-6",children:[(0,a.jsx)("div",{className:"flex flex-col mb-4 gap-4",children:s.map((e,t)=>{let{id:i,destinationCity:n,distance:s,originCity:r,travelTime:l,waitTime:c}=e,o=0===t;return(0,a.jsxs)("div",{className:"flex flex-row items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex-grow flex flex-col gap-4",children:[o?(0,a.jsx)("h4",{className:"-mt-5 text-textMuted font-medium text-sm truncate",children:"Paradas"}):null,o?(0,a.jsx)("div",{}):null,(0,a.jsxs)("p",{className:(0,d.cn)("text-textStepsChecked font-medium text-sm uppercase",o&&"-mb-2"),children:["Parada ",i]})]}),(0,a.jsxs)("div",{className:"flex-grow flex flex-col gap-4",children:[o?(0,a.jsx)("h4",{className:"text-textMuted font-medium text-sm truncate",children:"Ciudad de origen"}):null,(0,a.jsxs)("select",{className:"select w-full bg-bgCommonInput rounded-xl max-w-xs py-3 px-5 text-sm",placeholder:"Ciudad de origen parada ".concat(i),value:null!=r?r:void 0,onChange:e=>{let{target:{value:t}}=e;return P(i,t)},required:!0,children:[(0,a.jsx)("option",{children:"Seleccionar ruta"}),k.map((e,t)=>{let{city_name:i,id_city:n}=e;return(0,a.jsx)("option",{value:n,children:i},t)})]})]}),(0,a.jsxs)("div",{className:"flex-grow flex flex-col gap-4",children:[o?(0,a.jsx)("h4",{className:"text-textMuted font-medium text-sm truncate",children:"Ciudad de destino"}):null,(0,a.jsxs)("select",{className:"select w-full bg-bgCommonInput rounded-xl max-w-xs py-3 px-5 text-sm",placeholder:"Ciudad de destino parada ".concat(i),value:null!=n?n:void 0,onChange:e=>{let{target:{value:t}}=e;return q(i,t)},required:!0,children:[(0,a.jsx)("option",{children:"Seleccionar ruta"}),k.map((e,t)=>{let{city_name:i,id_city:n}=e;return(0,a.jsx)("option",{value:n,children:i},t)})]})]}),(0,a.jsxs)("div",{className:"relative flex-grow flex flex-col gap-4",children:[o?(0,a.jsx)("h4",{className:"text-textMuted font-medium text-sm truncate",children:"Tiempo de viaje"}):null,(0,a.jsx)("input",{type:"number",className:"input w-full max-w-xs py-3 px-5 rounded-xl bg-bgCommonInput text-sm text-black",placeholder:"Tiempo de viaje parada ".concat(i),value:l,onChange:e=>{let{target:{value:t}}=e;return z(i,+t)},required:!0}),(0,a.jsx)("div",{className:(0,d.cn)("absolute right-4 top-0 bottom-0 flex items-center",o&&"top-8"),children:(0,a.jsx)("span",{className:"text-textMutedStrong text-sm",children:"min."})})]}),(0,a.jsxs)("div",{className:"relative flex-grow flex flex-col gap-4",children:[o?(0,a.jsx)("h4",{className:"text-textMuted font-medium text-sm truncate",children:"Tiempo de espera"}):null,(0,a.jsx)("input",{type:"number",className:"input w-full max-w-xs py-3 px-5 rounded-xl bg-bgCommonInput text-sm text-black",placeholder:"Tiempo de espera parada ".concat(i),value:c,onChange:e=>{let{target:{value:t}}=e;return A(i,+t)},required:!0}),(0,a.jsx)("div",{className:(0,d.cn)("absolute right-4 top-0 bottom-0 flex items-center",o&&"top-8"),children:(0,a.jsx)("span",{className:"text-textMutedStrong text-sm",children:"min."})})]}),(0,a.jsxs)("div",{className:"relative flex-grow flex flex-col gap-4",children:[o?(0,a.jsx)("h4",{className:"text-textMuted font-medium text-sm truncate",children:"Distancia"}):null,(0,a.jsx)("input",{type:"number",className:"input w-full max-w-xs py-3 px-5 rounded-xl bg-bgCommonInput text-sm text-black",placeholder:"Distancia parada ".concat(i),value:s,onChange:e=>{let{target:{value:t}}=e;return H(i,+t)},required:!0}),(0,a.jsx)("div",{className:(0,d.cn)("absolute right-4 top-0 bottom-0 flex items-center",o&&"top-8"),children:(0,a.jsx)("span",{className:"text-textMutedStrong text-sm",children:"km."})})]}),(0,a.jsx)("div",{className:(0,d.cn)("relative flex flex-col gap-4",o&&"mt-9"),children:(0,a.jsx)("button",{className:"btn bg-bgred hover:bg-bgred rounded-[10px] w-12 h-12 p-0",onClick:()=>{D(i)},children:(0,a.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("mask",{id:"mask0_699_831",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:(0,a.jsx)("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),(0,a.jsx)("g",{mask:"url(#mask0_699_831)",children:(0,a.jsx)("path",{d:"M6 13V11H18V13H6Z",fill:"white"})})]})})})]},t)})}),(0,a.jsxs)("button",{className:"btn bg-bgblack text-white hover:bg-bggris rounded-[13px]",onClick:()=>{var e,t;m([...s,{id:null!==(t=(null===(e=s[s.length-1])||void 0===e?void 0:e.id)+1)&&void 0!==t?t:1,originCity:"",originCityId:null,destinationCity:"",destinationCityId:null,distance:0,travelTime:0,waitTime:0}])},disabled:C,children:[(0,a.jsx)(c.wEH,{className:"mr-2"}),"A\xf1adir parada"]})]})]}),(0,a.jsx)("div",{className:"divider"}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)(r(),{href:"/route",className:"btn rounded-[14px] border border-textStepsChecked bg-transparent text-primary hover:bg-primary hover:text-white",children:"Cancelar"}),(0,a.jsx)("button",{className:"btn rounded-[14px] bg-primary text-white hover:bg-secondary",onClick:R,disabled:C||_,children:C?(0,a.jsx)("span",{className:"loading loading-spinner"}):"Guardar"})]})]})]})}},5215:function(e,t,i){"use strict";i.d(t,{OT:function(){return n},T5:function(){return a},lC:function(){return s}});let a="http://3.14.43.44:4567",n=1,s="production"},6004:function(e,t,i){"use strict";i.d(t,{b:function(){return c}});var a=i(5262),n=i(9222),s=i(5215),r=i(1490);let l=r.Z.get("token"),d=n.Z.create({baseURL:s.T5,headers:{Authorization:"Bearer ".concat(l)}}),c=(0,a.gd)({axios:d})},2046:function(e,t,i){"use strict";i.d(t,{cn:function(){return s}});var a=i(7042),n=i(3986);function s(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,n.m)((0,a.W)(t))}},1396:function(e,t,i){e.exports=i(6685)},4033:function(e,t,i){e.exports=i(8165)},1172:function(e,t,i){"use strict";i.d(t,{w_:function(){return d}});var a=i(2265),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=a.createContext&&a.createContext(n),r=function(){return(r=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},l=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)0>t.indexOf(a[n])&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(i[a[n]]=e[a[n]]);return i};function d(e){return function(t){return a.createElement(c,r({attr:r({},e.attr)},t),function e(t){return t&&t.map(function(t,i){return a.createElement(t.tag,r({key:i},t.attr),e(t.child))})}(e.child))}}function c(e){var t=function(t){var i,n=e.attr,s=e.size,d=e.title,c=l(e,["attr","size","title"]),o=s||t.size||"1em";return t.className&&(i=t.className),e.className&&(i=(i?i+" ":"")+e.className),a.createElement("svg",r({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,c,{className:i,style:r(r({color:e.color||t.color},t.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),d&&a.createElement("title",null,d),e.children)};return void 0!==s?a.createElement(s.Consumer,null,function(e){return t(e)}):t(n)}}},function(e){e.O(0,[2306,6685,1677,1729,6820,2971,596,1744],function(){return e(e.s=4425)}),_N_E=e.O()}]);