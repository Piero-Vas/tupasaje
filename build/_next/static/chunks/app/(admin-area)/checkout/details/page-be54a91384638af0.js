(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9879],{2711:function(e,a,t){Promise.resolve().then(t.bind(t,660))},660:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return N}});var s=t(7437),r=t(2265);let n=e=>(0,s.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,s.jsx)("mask",{id:"mask0_751_558",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:(0,s.jsx)("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),(0,s.jsx)("g",{mask:"url(#mask0_751_558)",children:(0,s.jsx)("path",{d:"M11.0252 21V18.85C10.1419 18.65 9.37936 18.2667 8.7377 17.7C8.09603 17.1333 7.6252 16.3333 7.3252 15.3L9.1752 14.55C9.4252 15.35 9.79603 15.9583 10.2877 16.375C10.7794 16.7917 11.4252 17 12.2252 17C12.9085 17 13.4877 16.8458 13.9627 16.5375C14.4377 16.2292 14.6752 15.75 14.6752 15.1C14.6752 14.5167 14.4919 14.0542 14.1252 13.7125C13.7585 13.3708 12.9085 12.9833 11.5752 12.55C10.1419 12.1 9.15853 11.5625 8.6252 10.9375C8.09186 10.3125 7.8252 9.55 7.8252 8.65C7.8252 7.56667 8.1752 6.725 8.8752 6.125C9.5752 5.525 10.2919 5.18333 11.0252 5.1V3H13.0252V5.1C13.8585 5.23333 14.546 5.5375 15.0877 6.0125C15.6294 6.4875 16.0252 7.06667 16.2752 7.75L14.4252 8.55C14.2252 8.01667 13.9419 7.61667 13.5752 7.35C13.2085 7.08333 12.7085 6.95 12.0752 6.95C11.3419 6.95 10.7835 7.1125 10.4002 7.4375C10.0169 7.7625 9.8252 8.16667 9.8252 8.65C9.8252 9.2 10.0752 9.63333 10.5752 9.95C11.0752 10.2667 11.9419 10.6 13.1752 10.95C14.3252 11.2833 15.196 11.8125 15.7877 12.5375C16.3794 13.2625 16.6752 14.1 16.6752 15.05C16.6752 16.2333 16.3252 17.1333 15.6252 17.75C14.9252 18.3667 14.0585 18.75 13.0252 18.9V21H11.0252Z",fill:"#34D190"})})]});var o=t(2046),l=t(8085),c=t(6004),i=t(1490),d=t(4033),x=t(4396),m=t(1023);let h=[],u=[],p=[],b=[],f=[],g=0,j=0;var N=()=>{let e=(0,d.useRouter)();(0,m.I0)();let a=i.Z.get("token"),t=(0,r.useId)(),[N,v]=(0,r.useState)("SALIDA"),[w,S]=(0,r.useState)(""),[y,C]=(0,r.useState)(""),[A,D]=(0,r.useState)("SOL"),[k,T]=(0,r.useState)([]),[E,M]=(0,r.useState)([]),[R,L]=(0,r.useState)([]),[O,I]=(0,r.useState)(0),[_,H]=(0,r.useState)(0),[B,U]=(0,r.useState)(0),[q,P]=(0,r.useState)(0),[z,V]=(0,r.useState)(0),[{loading:Z},F]=(0,c.b)({method:"POST",url:"/cashiershiftdetail/1",headers:{Authorization:"Bearer ".concat(a)}},{manual:!0}),[{loading:G},W]=(0,c.b)({method:"POST",url:"/cashiershift/close/1",headers:{Authorization:"Bearer ".concat(a)}},{manual:!0}),J=new Date,K=()=>{"ENTRADA"===N?v("SALIDA"):v("ENTRADA")},Q=async a=>{try{await W({data:{}}),e.push("/checkout")}catch(e){console.error("Box Close failed:",e)}},X=async()=>{try{await F({data:"ENTRADA"===N?h:u})}catch(e){console.error("Box failed:",e)}"ENTRADA"==N?(console.log("Entrada"),T([]),console.log(k),h=[]):(console.log("Salida"),M([]),console.log(E),u=[])},Y=[],$=async e=>{Y=[],f=[];try{let e=await fetch("".concat("http://3.14.43.44:4567","/cashiershift/detail/1"),{method:"GET",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}}),t=await e.json();(Y=t.cashierShiftsDetail.cashierShiftDetails).map(e=>f.push([e.hour,e.hour,e.reason,"entry"==e.type?"Entrada":"Salida",e.amount])),console.log(Y),L(f),U(t.cashierShiftsDetail.entryAmount),P(t.cashierShiftsDetail.exitAmount),V(t.cashierShiftsDetail.balance)}catch(e){console.log(e)}window["".concat(t,"-checkout-modal")].showModal()};return(0,s.jsxs)(r.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)("h2",{className:"text-xl font-bold text-primary",children:"Entradas de caja"})}),(0,s.jsx)("div",{className:"p-4",children:(0,s.jsxs)("button",{onClick:$,className:"bg-[#36D99521] rounded-3xl btn flex items-center justify-center gap-1 px-4 py-3",children:[(0,s.jsx)(n,{className:"w-6 h-6"}),(0,s.jsx)("span",{className:"uppercase font-medium text-base text-textGreen",children:"Caja Abierta"})]})})]}),(0,s.jsxs)("div",{className:"flex justify-between gap-5 mt-4",children:[(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault();let a=10>J.getHours()?"0"+J.getHours():J.getHours(),t=10>J.getMinutes()?"0"+J.getMinutes():J.getMinutes();"ENTRADA"===N?(h.push({type:"entry",currency:"SOL",amount:w,reason:y,hour:"".concat(a,":").concat(t)}),p.push(["".concat(a,":").concat(t),1,y,"S/. ".concat(w),"SOL"]),I(g+=parseInt(w)),T(p),console.log(h),console.log(p)):(u.push({type:"exit",currency:"SOL",amount:w,reason:y,hour:"".concat(a,":").concat(t)}),b.push(["".concat(a,":").concat(t),1,y,"S/. ".concat(w),"SOL"]),H(j+=parseInt(w)),M(b)),S(""),C("")},className:"flex flex-col rounded-2xl bg-white border-[0.5px] border-borderPane p-6 shadow w-[364px] min-w-[364px]",children:[(0,s.jsxs)("div",{className:"tabs tabs-boxed rounded-[14px]",children:[(0,s.jsx)("a",{className:(0,o.cn)("tab grow px-8","ENTRADA"===N&&"tab-active"),onClick:K,children:"Entrada"}),(0,s.jsx)("a",{className:(0,o.cn)("tab grow px-8","SALIDA"===N&&"tab-active"),onClick:K,children:"Salida"})]}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-textMuted",children:"Monto Inicial"}),(0,s.jsxs)("div",{className:"mt-1 flex gap-2",children:[(0,s.jsxs)("select",{className:"select max-w-xs bg-bgCommonInput rounded-xl",value:A,onChange:e=>{D(e.target.value)},children:[(0,s.jsx)("option",{value:"SOL",children:"SOL"}),(0,s.jsx)("option",{value:"USD",children:"USD"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute font-normal text-sm text-textStepsMuted h-full flex items-center left-4 select-none",children:"SOL"===A?"S/.":"USD"}),(0,s.jsx)("input",{type:"number",placeholder:"00.0",value:w,onChange:e=>{let a=e.target.value;S(a)},required:!0,className:"input text-center w-full max-w-xs bg-bgCommonInput rounded-xl"})]})]})]}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-textMuted",children:"Nota"}),(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)("textarea",{className:"textarea w-full bg-bgCommonInput rounded-xl max-h-32 h-32",placeholder:"Ingresa una peque\xf1a anotaci\xf3n",value:y,onChange:e=>{let a=e.target.value;C(a)},required:!0})})]}),(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsxs)("button",{className:"btn btn-outline w-full rounded-[14px] border-primary hover:border-primary text-primary hover:bg-primary",children:["A\xf1adir ","ENTRADA"===N?"Entrada":"Salida"]})})]}),(0,s.jsxs)("div",{className:"flex flex-col flex-grow rounded-2xl bg-white border-[0.5px] border-borderPane p-6 shadow",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("h3",{className:"text-primary uppercase text-base font-medium",children:["Registro de ","ENTRADA"===N?"Entradas":"Salidas"]}),"ENTRADA"===N?(0,s.jsx)("div",{className:"mt-6 w-full overflow-auto",children:(0,s.jsx)(l.r,{style:{width:"100%"},data:k,columns:["Hora","C\xf3digo","Motivo","Monto","Moneda",{name:"Acciones",formatter:(e,a)=>(0,x.h)("button",{className:"w-12 mb-4 btn px-4 border rounded-md text-white bg-bgred hover:bg-bgred",onClick:()=>{console.log(a)}},"-")}],search:!1,pagination:!1})}):(0,s.jsx)("div",{className:"mt-6 w-full overflow-auto",children:(0,s.jsx)(l.r,{style:{width:"100%"},data:E,columns:["Hora","C\xf3digo","Motivo","Monto","Moneda",{name:"Acciones",formatter:(e,a)=>(0,x.h)("button",{className:"w-12 mb-4 btn px-4 border rounded-md text-white bg-bgred hover:bg-bgred",onClick:()=>{console.log(a)}},"-")}],search:!1,pagination:!1})})]}),(0,s.jsxs)("div",{className:"flex mt-4 gap-4 flex-col items-end flex-1 justify-end",children:[(0,s.jsxs)("p",{className:"text-base uppercase",children:["Total:"," ",(0,s.jsxs)("span",{children:["S/."," ",(0,s.jsx)("strong",{children:"".concat("ENTRADA"===N?O:_)})]})]}),(0,s.jsxs)("button",{onClick:()=>{window["".concat(t,"-confirm-modal")].showModal()},className:"btn bg-primary text-white hover:bg-secondary rounded-[14px]",children:["Confirmar ","ENTRADA"===N?"Entradas":"Salidas"]})]})]})]})]}),(0,s.jsx)("dialog",{id:"".concat(t,"-confirm-modal"),className:"modal rounded-[25px]",children:(0,s.jsxs)("form",{method:"dialog",className:"modal-box",children:[(0,s.jsx)("h3",{className:"font-bold text-lg uppercase text-center",children:"Aviso"}),(0,s.jsxs)("p",{className:"py-8 max-w-xs mx-auto text-center",children:["\xbfSeguro que deseas confirmar estas"," ","ENTRADA"===N?"entradas":"salidas"," de dinero?"]}),(0,s.jsxs)("div",{className:"modal-action",children:[(0,s.jsx)("button",{className:"btn flex-1 btn-outline rounded-[14px] border-primary hover:border-primary text-primary hover:bg-primary",onClick:X,children:"S\xed, seguro"}),(0,s.jsx)("button",{className:"btn flex-1 rounded-[14px] bg-primary text-white hover:bg-secondary",children:"Cancelar"})]})]})}),(0,s.jsx)("dialog",{id:"".concat(t,"-confirm-close-modal"),className:"modal rounded-[25px]",children:(0,s.jsxs)("form",{method:"dialog",className:"modal-box",children:[(0,s.jsx)("h3",{className:"font-bold text-lg uppercase text-center",children:"Aviso"}),(0,s.jsx)("p",{className:"py-8 max-w-xs mx-auto text-center",children:"Tiene entradas o salidas por registrar"}),(0,s.jsx)("div",{className:"modal-action",children:(0,s.jsx)("button",{className:"btn flex-1 rounded-[14px] bg-primary text-white hover:bg-secondary",children:"Aceptar"})})]})}),(0,s.jsx)("dialog",{id:"".concat(t,"-checkout2-modal"),className:"modal rounded-[25px]",children:(0,s.jsxs)("form",{method:"dialog",className:"modal-box",children:[(0,s.jsx)("h3",{className:"font-bold text-lg uppercase text-center",children:"Aviso"}),(0,s.jsx)("p",{className:"py-8 max-w-xs mx-auto text-center",children:"\xbfSeguro que deseas cerrar caja?"}),(0,s.jsxs)("div",{className:"modal-action",children:[(0,s.jsx)("button",{className:"btn flex-1 btn-outline rounded-[14px] border-primary hover:border-primary text-primary hover:bg-primary",onClick:Q,children:"S\xed, seguro"}),(0,s.jsx)("button",{className:"btn flex-1 rounded-[14px] bg-primary text-white hover:bg-secondary",children:"Cancelar"})]})]})}),(0,s.jsx)("dialog",{id:"".concat(t,"-checkout-modal"),className:"modal rounded-[25px]",children:(0,s.jsxs)("form",{method:"dialog",className:"modal-box w-11/12 max-w-5xl",children:[(0,s.jsx)("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"✕"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:"Cierre de caja"}),(0,s.jsx)("div",{className:"mt-6 w-full overflow-auto",children:(0,s.jsx)(l.r,{style:{width:"100%"},data:R,columns:["Fecha","Hora","Concepto","Tipo","Saldo"],search:!1,pagination:!1})}),(0,s.jsxs)("div",{className:"mt-8 flex flex-col items-end justify-end",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm",children:["Total entradas: S/ ",B.toString()," "]}),(0,s.jsxs)("p",{className:"text-sm",children:["Total salidas: S/",q.toString()]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"divider"}),(0,s.jsxs)("p",{className:"mt-6 text-base uppercase font-bold",children:["Saldo Actual: ",(0,s.jsxs)("span",{children:["S/.",z.toString()]})]})]})]})]}),(0,s.jsx)("div",{className:"modal-action",children:(0,s.jsx)("button",{onClick:()=>{window["".concat(t,"-checkout2-modal")].showModal()},className:"btn rounded-[14px] bg-primary text-white hover:bg-secondary",children:"Cerrar Caja"})})]})})]})}},5215:function(e,a,t){"use strict";t.d(a,{OT:function(){return r},T5:function(){return s},lC:function(){return n}});let s="http://3.14.43.44:4567",r=1,n="production"},6004:function(e,a,t){"use strict";t.d(a,{b:function(){return i}});var s=t(5262),r=t(9222),n=t(5215),o=t(1490);let l=o.Z.get("token"),c=r.Z.create({baseURL:n.T5,headers:{Authorization:"Bearer ".concat(l)}}),i=(0,s.gd)({axios:c})},2046:function(e,a,t){"use strict";t.d(a,{cn:function(){return n}});var s=t(7042),r=t(3986);function n(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,r.m)((0,s.W)(a))}},4033:function(e,a,t){e.exports=t(8165)}},function(e){e.O(0,[1677,1729,8085,1023,2971,596,1744],function(){return e(e.s=2711)}),_N_E=e.O()}]);