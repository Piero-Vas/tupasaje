(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5946],{842:function(e,t,s){"use strict";var l,a,n=s(2265);function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e}).apply(this,arguments)}t.Z=function(e){return n.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,fill:"none"},e),n.createElement("mask",{id:"addimage_svg__a",width:48,height:48,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},l||(l=n.createElement("path",{fill:"#D9D9D9",d:"M0 0h48v48H0z"}))),a||(a=n.createElement("g",{mask:"url(#addimage_svg__a)"},n.createElement("path",{fill:"#4185EF",d:"M9 42a2.889 2.889 0 0 1-2.119-.881A2.89 2.89 0 0 1 6 39V9c0-.825.294-1.531.881-2.119A2.889 2.889 0 0 1 9 6h20.45v3H9v30h30V18.6h3V39c0 .825-.294 1.531-.881 2.119A2.889 2.889 0 0 1 39 42H9Zm26-24.9v-4.05h-4.05v-3H35V6h3v4.05h4.05v3H38v4.05h-3ZM12 33.9h24l-7.2-9.6-6.35 8.35-4.7-6.2L12 33.9Z"}))))}},4077:function(e,t,s){Promise.resolve().then(s.bind(s,804))},804:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var l=s(7437),a=s(2265),n=s(1396),r=s.n(n),i=s(1865),c=s(8110),o=s(4578);let d=o.ZP.object({name:o.ZP.string(),brand:o.ZP.string(),model:o.ZP.string(),licensePlate:o.ZP.string(),certificate:o.ZP.string(),baseOffice:o.ZP.string(),image:o.ZP.any()}),u=()=>(0,i.cI)({resolver:(0,c.F)(d)});var m=s(4033),x=s(6820),h=s.n(x),p=s(6004),b=s(842),f=s(3941),g=s(9379),j=s(2046),v=()=>{var e,t;let[s,n]=(0,a.useState)(null),[i,c]=(0,a.useState)(null),o=(0,a.useId)(),d=(0,m.useRouter)(),{handleSubmit:x,register:v,setValue:N}=u(),[{loading:w,data:y}]=(0,p.b)("/office/list"),[{loading:k},_]=(0,p.b)({method:"POST",url:"/buses/create"},{manual:!0}),[{loading:P},M]=(0,p.b)({method:"POST",url:"/company/user/upload"},{manual:!0}),[{loading:O},Z]=(0,p.b)({method:"PUT",url:"/buses/seats/copy"},{manual:!0}),C=k||P||O||w,S=null!==(t=null==y?void 0:null===(e=y.data)||void 0===e?void 0:e.offices)&&void 0!==t?t:[],H=x(async e=>{let{name:t,brand:s,model:l,licensePlate:a,certificate:n,baseOffice:r,image:i}=e;if(!i||0===i.length){alert("por favor sube una imagen");return}let c=new FormData;c.append("file",i[0]);try{let e=await M({data:c});console.log(e.data)}catch(e){console.log("Error:",e),h().fire({icon:"error",title:"Oops...",timer:2e3,text:"Ocurri\xf3 un error inesperado al subir la imagen"})}try{let e=await _({data:{name:t,brand:s,model:l,license_plate:a,certificate:n,base_office:+r}});console.log("createdBusResponse",e.data);let i=e.data.bus.id_bus;await Z({data:{id_bus_origin:3,id_bus_destination:i}});let c=new URLSearchParams;c.append("newBusId",String(i)),d.push("/bus/create/second-step?".concat(c.toString()))}catch(e){console.log("Error:",e),h().fire({icon:"error",title:"Oops...",timer:2e3,text:"Ocurri\xf3 un error inesperado al crear un bus"})}});return(0,l.jsxs)("form",{className:"flex flex-col",onSubmit:H,children:[(0,l.jsx)("div",{className:"flex flex-row justify-between",children:(0,l.jsx)("div",{className:"",children:(0,l.jsx)("h2",{className:"text-xl font-bold text-primary",children:"Nuevo bus"})})}),(0,l.jsxs)("div",{className:"flex mt-8 gap-4",children:[(0,l.jsx)("div",{className:"",children:(0,l.jsxs)("ul",{className:"steps steps-vertical",children:[(0,l.jsx)("li",{className:"step step-primary text-textStepsChecked font-medium",children:"Datos generales"}),(0,l.jsx)("li",{className:"step text-textStepsMuted",children:"Precios base"}),(0,l.jsx)("li",{className:"step text-textStepsMuted",children:"Precios por columna"}),(0,l.jsx)("li",{className:"step text-textStepsMuted",children:"Precios por asientos"})]})}),(0,l.jsx)("div",{className:"flex flex-1",children:(0,l.jsxs)("div",{className:"bg-white shadow rounded-[25px] border-[0.5px] border-borderPane flex flex-col flex-1 px-6 py-8",children:[(0,l.jsx)("div",{className:"",children:(0,l.jsx)("h3",{className:"font-medium text-sm text-textMuted uppercase",children:"Datos generales"})}),(0,l.jsxs)("div",{className:"flex flex-1 gap-10 mt-6",children:[(0,l.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{htmlFor:"".concat(o,"-name-input"),className:"block mb-1 font-medium text-sm ",children:"Nombre"}),(0,l.jsx)("input",{type:"text",id:"".concat(o,"-name-input"),className:"w-full py-3 px-5 rounded-br11 bg-bginput text-sm text-black",placeholder:"Ingresa el nombre",required:!0,...v("name")})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{htmlFor:"".concat(o,"-brand-input"),className:"block mb-1 font-medium text-sm ",children:"Marca"}),(0,l.jsx)("input",{type:"text",className:"w-full py-3 px-5 rounded-br11 bg-bginput text-sm text-black",placeholder:"Ingresa el marca",required:!0,id:"".concat(o,"-brand-input"),...v("brand")})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{htmlFor:"".concat(o,"-model-select"),className:"block mb-1 font-medium text-sm ",children:"Modelo"}),(0,l.jsxs)("select",{id:"".concat(o,"-model-select"),className:"select w-full bg-bginput",required:!0,...v("model"),children:[(0,l.jsx)("option",{value:1,children:"Modelo 1"}),(0,l.jsx)("option",{value:2,children:"Modelo 2"}),(0,l.jsx)("option",{value:3,children:"Modelo 3"}),(0,l.jsx)("option",{value:4,children:"Modelo 4"}),(0,l.jsx)("option",{value:5,children:"Modelo 5"}),(0,l.jsx)("option",{value:6,children:"Modelo 6"})]})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{htmlFor:"".concat(o,"-plate-input"),className:"block mb-1 font-medium text-sm ",children:"Placa"}),(0,l.jsx)("input",{type:"text",className:"w-full py-3 px-5 rounded-br11 bg-bginput text-sm text-black",placeholder:"Ingresa el n\xfamero de placa",required:!0,id:"".concat(o,"-plate-input"),...v("licensePlate")})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{htmlFor:"".concat(o,"-certificate-input"),className:"block mb-1 font-medium text-sm ",children:"Certificado"}),(0,l.jsx)("input",{type:"text",className:"w-full py-3 px-5 rounded-br11 bg-bginput text-sm text-black",placeholder:"Ingresa el n\xfamero de certificado",required:!0,id:"".concat(o,"-certificate-input"),...v("certificate")})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{htmlFor:"".concat(o,"-office-select"),className:"block mb-1 font-medium text-sm ",children:"Oficinas"}),(0,l.jsxs)("select",{id:"".concat(o,"-office-select"),className:"select w-full bg-bginput",required:!0,...v("baseOffice"),children:[(0,l.jsx)("option",{children:"Seleccionar Oficina"}),S.map((e,t)=>{let{id_office:s,office_name:a}=e;return(0,l.jsx)("option",{value:s,children:a},t.toString())})]})]})]}),(0,l.jsx)("div",{className:"flex flex-1 flex-col",children:(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block mb-1 font-medium text-sm",children:"Foto"}),i?(0,l.jsxs)("div",{className:"flex justify-between items-center my-6",children:[(0,l.jsx)("p",{className:"truncate",children:i}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{type:"button",className:"btn bg-bgblack hover:bg-bgblack/90 rounded-xl",onClick:()=>{window["dropzone-file"].click()},children:(0,l.jsx)(f.x,{})}),(0,l.jsx)("button",{type:"button",className:"btn bg-transparent border border-bgblack rounded-xl",onClick:()=>{n(null),c(null),N("image",null)},children:(0,l.jsx)(g.A,{})})]})]}):null,(0,l.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,l.jsxs)("label",{htmlFor:"dropzone-file",className:(0,j.cn)("flex bg-cover bg-no-repeat bg-center flex-col items-center justify-center w-9/12 h-[20rem] cursor-pointer rounded-lg overflow-hidden",s?"":"border border-dashed border-gray-200"),style:{backgroundImage:null!=s?s:void 0},children:[(0,l.jsx)("div",{className:"flex flex-1",children:(0,l.jsx)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:i?null:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(b.Z,{className:"mb-4"}),(0,l.jsxs)("p",{className:(0,j.cn)("text-center w-8/12 text-sm",s?"text-white":"text-gray-500"),children:[(0,l.jsx)("span",{className:"font-semibold",children:"Arrastra y suelta"})," ","una imagen aqu\xed o haz clic para buscar en tu computadora"]})]})})}),(0,l.jsx)("input",{id:"dropzone-file",type:"file",className:"hidden",accept:".png, .jpg, .jpeg",...v("image",{onChange(e){let t=e.target.files[0];if(t){c(t.name);let e=new FileReader;e.onload=e=>{var t;n("url(".concat(null===(t=e.target)||void 0===t?void 0:t.result,")"))},e.readAsDataURL(t)}}})})]})})]})})]})]})})]}),(0,l.jsx)("div",{className:"divider"}),(0,l.jsxs)("div",{className:"flex justify-between mb-10",children:[(0,l.jsx)("div",{}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)(r(),{className:"btn rounded-[14px] border border-textStepsChecked bg-transparent text-primary hover:bg-primary hover:text-white",href:"/bus",children:"Cancelar"}),(0,l.jsx)("button",{type:"submit",disabled:C,className:"btn rounded-[14px] bg-primary text-white hover:bg-secondary",children:C?(0,l.jsx)("span",{className:"loading loading-spinner"}):"Continuar"})]})]})]})}},9379:function(e,t,s){"use strict";s.d(t,{A:function(){return a}});var l=s(7437);let a=e=>(0,l.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,l.jsx)("mask",{id:"mask0_457_916",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:(0,l.jsx)("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),(0,l.jsx)("g",{mask:"url(#mask0_457_916)",children:(0,l.jsx)("path",{d:"M7 21C6.45 21 5.97917 20.8042 5.5875 20.4125C5.19583 20.0208 5 19.55 5 19V6H4V4H9V3H15V4H20V6H19V19C19 19.55 18.8042 20.0208 18.4125 20.4125C18.0208 20.8042 17.55 21 17 21H7ZM9 17H11V8H9V17ZM13 17H15V8H13V17Z",fill:"#343438"})})]})},3941:function(e,t,s){"use strict";s.d(t,{x:function(){return a}});var l=s(7437);let a=e=>(0,l.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,l.jsx)("mask",{id:"mask0_457_919",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:(0,l.jsx)("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),(0,l.jsx)("g",{mask:"url(#mask0_457_919)",children:(0,l.jsx)("path",{d:"M19.3 8.925L15.05 4.725L16.45 3.325C16.8333 2.94167 17.3042 2.75 17.8625 2.75C18.4208 2.75 18.8917 2.94167 19.275 3.325L20.675 4.725C21.0583 5.10833 21.2583 5.57083 21.275 6.1125C21.2917 6.65417 21.1083 7.11667 20.725 7.5L19.3 8.925ZM17.85 10.4L7.25 21H3V16.75L13.6 6.15L17.85 10.4Z",fill:"white"})})]})},5215:function(e,t,s){"use strict";s.d(t,{OT:function(){return a},T5:function(){return l},lC:function(){return n}});let l="http://3.14.43.44:4567",a=1,n="production"},6004:function(e,t,s){"use strict";s.d(t,{b:function(){return o}});var l=s(5262),a=s(9222),n=s(5215),r=s(1490);let i=r.Z.get("token"),c=a.Z.create({baseURL:n.T5,headers:{Authorization:"Bearer ".concat(i)}}),o=(0,l.gd)({axios:c})},2046:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var l=s(7042),a=s(3986);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m)((0,l.W)(t))}},1396:function(e,t,s){e.exports=s(6685)}},function(e){e.O(0,[6685,1677,1729,6820,383,8110,2971,596,1744],function(){return e(e.s=4077)}),_N_E=e.O()}]);